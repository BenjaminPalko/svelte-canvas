import"../chunks/DsnmJJEf.js";import"../chunks/CMxa3vIF.js";import{af as y,I as D,N as U,a1 as i,ag as c,ah as p,a4 as b,ad as W,a7 as L,L as N,a8 as _,ae as q,a9 as A}from"../chunks/WzLhjWsQ.js";import{d as F,e as x}from"../chunks/C1iIb7br.js";import{b as O}from"../chunks/DT3sLOaI.js";class r{x;y;constructor(t,s){this.x=t,this.y=s}static get Zero(){return new r(0,0)}get Magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}Add(t){return new r(this.x+t.x,this.y+t.y)}Sub(t){return new r(this.x-t.x,this.y-t.y)}Scale(t){return new r(this.x*t,this.y*t)}Dot(t){return this.x*t.x+this.y*t.y}Lerp(t,s){return new r(this.lerp(this.x,t.x,s),this.lerp(this.y,t.y,s))}lerp(t,s,o){return(1-o)*t+o*s}}const m={UP:"up",DOWN:"down"};class E{inCanvas;position;leftButton;rightButton;ButtonState=m;constructor(){this.inCanvas=!1,this.position=r.Zero,this.leftButton=m.UP,this.rightButton=m.UP}}const n=y(new E);class I{constructor(t){this.position=t}}class v extends I{constructor(t,s){super(t),this.radius=s}UpdatePosition(t){return new v(t,this.radius)}Render(t){t.beginPath(),t.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI),t.fillStyle="#fff",t.fill()}WithinBounds(t){const s=t.Sub(this.position);return s.x<=this.radius||s.y<=this.radius}}var R=b('<canvas draggable="false"><!></canvas>');function Z(h,t){D(t,!0);let s=c(0),o=c(void 0),l=y([]),u=c(void 0);U(()=>{requestAnimationFrame(e=>w(e))});function w(e){if(!i(o))return;i(o).width=window.innerWidth,i(o).height=window.innerHeight;const d=i(o).getContext("2d");d.reset(),n.inCanvas&&n.leftButton==n.ButtonState.DOWN&&i(u)&&p(u,i(u).UpdatePosition(i(u).position.Lerp(n.position,e*.02)),!0),l.forEach(f=>f.Render(d)),requestAnimationFrame(f=>{w(f-i(s)),p(s,f,!0)})}function g(e){n.inCanvas=!0}function B(e){n.inCanvas=!1}function M(e){e.preventDefault(),n.leftButton=n.ButtonState.DOWN,n.position=new r(e.x,e.y),p(u,l.find(d=>d.WithinBounds(n.position)),!0),i(u)||l.push(new v(n.position,10))}function S(e){e.preventDefault(),n.leftButton=n.ButtonState.UP,p(u,void 0)}function P(e){n.position=new r(e.x,e.y)}var a=R();a.__mousedown=M,a.__mouseup=S,a.__mousemove=P;var C=_(a);W(C,()=>t.children??q),A(a),O(a,e=>p(o,e),()=>i(o)),x("mouseenter",a,g),x("mouseleave",a,B),L(h,a),N()}F(["mousedown","mouseup","mousemove"]);function G(h){Z(h,{})}export{G as component};
