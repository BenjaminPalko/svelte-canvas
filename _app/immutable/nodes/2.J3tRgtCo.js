import"../chunks/DsnmJJEf.js";import"../chunks/CMxa3vIF.js";import{af as y,I as C,N as D,a1 as i,ag as c,ah as p,a4 as U,ad as W,a7 as L,L as N,a8 as _,ae as q,a9 as A}from"../chunks/WzLhjWsQ.js";import{d as F,e as x}from"../chunks/C1iIb7br.js";import{b as O}from"../chunks/DT3sLOaI.js";class r{x;y;constructor(t,e){this.x=t,this.y=e}static get Zero(){return new r(0,0)}get Magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}Add(t){return new r(this.x+t.x,this.y+t.y)}Sub(t){return new r(this.x-t.x,this.y-t.y)}Scale(t){return new r(this.x*t,this.y*t)}Dot(t){return this.x*t.x+this.y*t.y}Lerp(t,e){return new r(this.lerp(this.x,t.x,e),this.lerp(this.y,t.y,e))}lerp(t,e,o){return(1-o)*t+o*e}}const m={UP:"up",DOWN:"down"};class E{inCanvas;position;leftButton;rightButton;ButtonState=m;constructor(){this.inCanvas=!1,this.position=r.Zero,this.leftButton=m.UP,this.rightButton=m.UP}}const n=y(new E);class I{constructor(t){this.position=t}}class v extends I{constructor(t,e){super(t),this.radius=e}UpdatePosition(t){return new v(t,this.radius)}Render(t){t.beginPath(),t.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI),t.fillStyle="#fff",t.fill()}WithinBounds(t){const e=t.Sub(this.position);return e.x<=this.radius||e.y<=this.radius}}var R=U('<canvas class="bg-slate-800" draggable="false"><!></canvas>');function Z(h,t){C(t,!0);let e=c(0),o=c(void 0),l=y([]),u=c(void 0);D(()=>{requestAnimationFrame(s=>w(s))});function w(s){if(!i(o))return;i(o).width=window.innerWidth,i(o).height=window.innerHeight;const d=i(o).getContext("2d");d.reset(),n.inCanvas&&n.leftButton==n.ButtonState.DOWN&&i(u)&&p(u,i(u).UpdatePosition(i(u).position.Lerp(n.position,s*.02)),!0),l.forEach(f=>f.Render(d)),requestAnimationFrame(f=>{w(f-i(e)),p(e,f,!0)})}function g(s){n.inCanvas=!0}function B(s){n.inCanvas=!1}function M(s){s.preventDefault(),n.leftButton=n.ButtonState.DOWN,n.position=new r(s.x,s.y),p(u,l.find(d=>d.WithinBounds(n.position)),!0),i(u)||l.push(new v(n.position,10))}function S(s){s.preventDefault(),n.leftButton=n.ButtonState.UP,p(u,void 0)}function P(s){n.position=new r(s.x,s.y)}var a=R();a.__mousedown=M,a.__mouseup=S,a.__mousemove=P;var b=_(a);W(b,()=>t.children??q),A(a),O(a,s=>p(o,s),()=>i(o)),x("mouseenter",a,g),x("mouseleave",a,B),L(h,a),N()}F(["mousedown","mouseup","mousemove"]);function G(h){Z(h,{})}export{G as component};
